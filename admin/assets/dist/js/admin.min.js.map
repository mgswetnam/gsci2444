{"version":3,"sources":["admin.js"],"names":["jQuery","document","ready","$","console","log","length","id_prefix","attr","replace","name_prefix","thefields","refresh_functions","each","mylinknum","this","closest","data","off","on","remove_link","linknum","is","prevnum","insertBefore","renumber_links","move_link_up","nextnum","insertAfter","move_link_down","confirm","remove","i","childNodes","nodeValue","add_element","theelement","thedata","JSON","parse","index","createElement","type","theatts","atts","thekeys","Object","keys","mykey","k","v","addClass","html","content","e","preventDefault","last","fieldset","deletebtn","deletewrap","append","upbtn","upwrap","downbtn","downwrap","legend","wrapper","toLowerCase","label","input"],"mappings":"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","file":"admin.min.js","sourcesContent":["/*import 'custom/filters.js'; */\n\n/*\n * csa_admin v1.0\n * -------------------\n * Copyright (c) 2019 Matthew Swetnam\n */\njQuery( document ).ready( function( $ ) {\n  console.log( \"Canadensis Admin\" );\n  if( $( \".widget-liquid-right .csa-featured-links.text-field.link-heading\" ).length ) {\n    var id_prefix = $( \".widget-liquid-right .csa-featured-links.text-field.link-heading\" ).attr( \"id\" ).replace( \"heading\", \"\" );\n    var name_prefix = $( \".widget-liquid-right .csa-featured-links.text-field.link-heading\" ).attr( \"name\" ).replace( \"[heading]\", \"\" );\n    var thefields = [\"Title\",\"Desc\",\"URL\",\"Icon\"];\n\n    refresh_functions()\n  } \n\n  $( \".csa-featured-links.form-button\" ).on( \"click\", function( e ){\n    e.preventDefault();\n\n    if( $( \".csa-featured-link\" ).length == 0 ){\n      linknum = \"1\";\n    } else {\n      linknum = $( \".csa-featured-link\" ).last().data( \"link-number\" );\n      linknum++;\n    }\n    // Render fields\n    var fieldset = add_element( '[{\"type\":\"fieldset\",\"atts\":[{\"id\":\"csa-featured-link|' + linknum + '\",\"class\":\"csa-admin csa-featured-link\",\"data-link-number\":\"' + linknum + '\"}],\"content\":\"\" }]' );\n    var deletebtn = add_element( '[{\"type\":\"i\",\"atts\":[{\"id\":\"csa-remove-link-' + linknum + '\",\"class\":\"csa-remove-link dashicons dashicons-dismiss\"}],\"content\":\"\" }]' );\n    $( deletebtn ).on( \"click\", function(){ remove_link( linknum ); } );\n    var deletewrap = add_element( '[{\"type\":\"span\",\"atts\":[{}],\"content\":\"\" }]' );\n    $( deletewrap ).append( deletebtn );\n    var upbtn = add_element( '[{\"type\":\"i\",\"atts\":[{\"id\":\"csa-up-link-' + linknum + '\",\"class\":\"csa-up-link dashicons dashicons-arrow-up-alt2\"}],\"content\":\"\" }]' );\n    var upwrap = add_element( '[{\"type\":\"span\",\"atts\":[{}],\"content\":\"\" }]' );\n    $( upwrap ).append( upbtn );\n    var downbtn = add_element( '[{\"type\":\"i\",\"atts\":[{\"id\":\"csa-down-link-' + linknum + '\",\"class\":\"csa-down-link dashicons dashicons-arrow-down-alt2\"}],\"content\":\"\" }]' );\n    var downwrap = add_element( '[{\"type\":\"span\",\"atts\":[{}],\"content\":\"\" }]' );\n    $( downwrap ).append( downbtn );\n    var legend = add_element( '[{\"type\":\"legend\",\"atts\":[{\"class\":\"csa-link-name\"}],\"content\":\"Link ' + linknum + ' \" }]' );\n    $( legend ).append( deletewrap,upwrap,downwrap );\n    $( fieldset ).append( legend );\n    $.each( thefields, function( k, v ){\n      var wrapper = add_element( '[{\"type\":\"div\",\"atts\":[{\"class\":\"field-wrapper ' + v.toLowerCase() + '-wrap\"}],\"content\":\"\" }]' );\n      var label = add_element( '[{\"type\":\"label\",\"atts\":[{\"for\":\"' + id_prefix + v.toLowerCase() + '-' + linknum + '\"}],\"content\":\"' + v + '\" }]' );\n      var input = add_element('[{\"type\":\"input\",\"atts\":[{\"id\":\"' + id_prefix + v.toLowerCase() + '-' + linknum + '\",\"name\":\"' + name_prefix + '[' + v.toLowerCase() + '][]\",\"class\":\"\",\"size\":\"40\"}],\"content\":\"\" }]');\n      $( label ).append( input );\n      $( wrapper ).append( label );\n      $( fieldset ).append( wrapper );\n    } );\n    $( \".csa-admin.csa-featured-link-wrapper\" ).append( fieldset );\n  } );\n\n  function refresh_functions(){\n    $( \"i[id^='csa-remove-link-']\" ).each( function(){\n      var mylinknum = $( this ).closest(\"fieldset\").data( \"link-number\" );\n      $( this ).off( \"click\" ).on( \"click\", function(){ remove_link( mylinknum ); } );\n    } );\n    $( \"i[id^='csa-up-link-']\" ).each( function(){\n      var mylinknum = $( this ).closest(\"fieldset\").data( \"link-number\" );\n      $( this ).off( \"click\" ).on( \"click\", function(){ move_link_up( mylinknum ); } );\n    } );\n    $( \"i[id^='csa-down-link-']\" ).each( function(){\n      var mylinknum = $( this ).closest(\"fieldset\").data( \"link-number\" );\n      $( this ).off( \"click\" ).on( \"click\", function(){ move_link_down( mylinknum ); } );\n    } );\n  }\n\n  function remove_link( linknum ){\n    if( confirm( \"Are you sure you want to delete link \" + linknum + \"? NOTICE: CHANGE WILL ONLY BECOME PERMANENT ONCE THE WIDGET IS SAVED.\" ) ){\n      $( \"fieldset[id='csa-featured-link|\" + linknum + \"'\" ).remove();\n      renumber_links();\n    }\n  }\n\n  function move_link_up( linknum ){\n    if( $( \"fieldset[id='csa-featured-link|\" + linknum ).is(':not(:first-child)') ){\n      var prevnum = linknum-1;\n      $( \"fieldset[id='csa-featured-link|\" + linknum ).insertBefore( \"fieldset[id='csa-featured-link|\" + prevnum );\n      renumber_links();\n    }\n  }\n\n  function move_link_down( linknum ){\n    if( $( \"fieldset[id='csa-featured-link|\" + linknum ).is(':not(:last-child)') ){\n      var nextnum = linknum+1;\n      $( \"fieldset[id='csa-featured-link|\" + linknum ).insertAfter( \"fieldset[id='csa-featured-link|\" + nextnum );\n      renumber_links();\n    }\n  }\n\n  function renumber_links(){\n    var i=1;\n    $( \"fieldset[id^='csa-featured-link|\" ).each( function(){\n      $( this ).data( \"link-number\", i );\n      $( this ).attr( \"data-link-number\", i );\n      $( this ).attr( \"id\", \"csa-featured-link|\" + i );\n      $( \"legend\", this )[ 0 ].childNodes[ 0 ].nodeValue = \"Link \" + i;\n      $( \"i[id^='csa-remove-link-']\", this ).attr( \"id\", \"csa-remove-link-\" + i );\n      $( \"i[id^='csa-up-link-']\", this ).attr( \"id\", \"csa-up-link-\" + i );\n      $( \"i[id^='csa-down-link-']\", this ).attr( \"id\", \"csa-down-link-\" + i );\n      $( \"label[for^='\" + id_prefix + \"title-']\", this ).attr( \"for\", id_prefix + \"title-\" + i );\n      $( \"input[id^='\" + id_prefix + \"title-']\", this ).attr( \"id\", id_prefix + \"title-\" + i );\n      $( \"label[for^='\" + id_prefix + \"desc-']\", this ).attr( \"for\", id_prefix + \"desc-\" + i );\n      $( \"input[id^='\" + id_prefix + \"desc-']\", this ).attr( \"id\", id_prefix + \"desc-\" + i );\n      $( \"label[for^='\" + id_prefix + \"url-']\", this ).attr( \"for\", id_prefix + \"url-\" + i );\n      $( \"input[id^='\" + id_prefix + \"url-']\", this ).attr( \"id\", id_prefix + \"url-\" + i );\n      $( \"label[for^='\" + id_prefix + \"icon-']\", this ).attr( \"for\", id_prefix + \"icon-\" + i );\n      $( \"input[id^='\" + id_prefix + \"icon-']\", this ).attr( \"id\", id_prefix + \"icon-\" + i );\n      i++;\n    } );\n    refresh_functions();\n  }\n\n  function add_element( data ) {\n    var thedata = JSON.parse( data );\n    var theelement;\n    $.each( thedata, function( index ){\n      theelement = document.createElement( thedata[ index ].type );\n      var theatts = thedata[ index ].atts;\n      $.each( theatts, function( i ){\n        var thekeys = Object.keys( theatts[ i ] );\n        $.each( thekeys, function( mykey ){\n          var k = thekeys[ mykey ];\n          var v = theatts[ i ][ thekeys[ mykey ] ];\n          if( k===\"class\" ) {\n            $( theelement ).addClass( v );\n          } else {\n            $( theelement ).attr( k, v );\n          }\n        } );\n      } );\n      $( theelement ).html( thedata[ index ].content );\n    } );\n    return theelement;\n  }\n} );\n"],"sourceRoot":"/source/"}